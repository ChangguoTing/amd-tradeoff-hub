<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMD Server Consolidation & Density Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- 1. å…¨å±€æ¨£å¼ (AMD Bright Professional) --- */
        body { 
            font-family: 'Segoe UI', Helvetica, Arial, sans-serif; 
            margin: 0; 
            background-color: #f9fafb; /* æ¥µæ·ºç°èƒŒæ™¯ */
            color: #333; /* æ·±ç°æ–‡å­— */
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
        }
        
        /* é ‚éƒ¨æ¨™é¡Œåˆ— */
        header { 
            background-color: #ffffff; 
            padding: 0 30px; 
            height: 70px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            border-bottom: 1px solid #e5e7eb;
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
            flex-shrink: 0; 
        }
        
        /* AMD Logo è¨­å®š */
        .brand { display: flex; align-items: center; gap: 15px; }
        .brand img { height: 24px; width: auto; display: block; }
        .title { 
            font-size: 18px; font-weight: 600; text-transform: uppercase; color: #6b7280; letter-spacing: 1px;
            border-left: 2px solid #e5e7eb; padding-left: 15px;
        }
        .header-icons i { font-size: 20px; color: #ED1C24; }

        /* ä¸»å®¹å™¨ */
        .container { flex: 1; padding: 30px; overflow-y: auto; max-width: 1400px; margin: 0 auto; width: 100%; box-sizing: border-box; display: flex; gap: 30px; }

        /* --- å·¦å´è¼¸å…¥å€ --- */
        .sidebar { 
            width: 400px; 
            display: flex; flex-direction: column; gap: 25px; flex-shrink: 0;
        }

        /* é¢æ¿æ¨£å¼ */
        .panel { 
            background: #ffffff; border: 1px solid #d1d5db; border-radius: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); overflow: hidden;
        }
        .panel-header { 
            background: #f3f4f6; color: #111827; padding: 12px 20px; font-size: 13px; font-weight: 700; 
            display: flex; justify-content: space-between; align-items: center; 
            border-bottom: 1px solid #d1d5db; text-transform: uppercase; letter-spacing: 0.5px;
            border-left: 4px solid #ED1C24; /* å·¦å´ç´…ç·šå¼·èª¿ */
        }
        .panel-body { padding: 20px; display: flex; flex-direction: column; gap: 20px; }

        /* è¼¸å…¥æ§åˆ¶é … */
        .input-row { display: flex; flex-direction: column; gap: 10px; }
        .input-label-group { display: flex; justify-content: space-between; align-items: center; font-size: 13px; font-weight: 600; color: #4b5563; }
        
        /* æ•¸å€¼é¡¯ç¤º */
        .val-display { font-weight: 700; color: #ED1C24; font-family: monospace; font-size: 14px; }

        /* æ»‘æ¡¿æ¨£å¼ */
        .slider-wrapper { display: flex; align-items: center; height: 20px; }
        input[type="range"] {
            flex: 1; height: 6px; -webkit-appearance: none; appearance: none; background: #e5e7eb; border-radius: 3px; outline: none; border: none; cursor: pointer;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none; appearance: none; width: 18px; height: 18px; 
            background: #000; border-radius: 50%; border: 2px solid #fff; cursor: pointer; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.2); transition: transform 0.1s;
        }
        input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.1); background: #ED1C24; }

        /* --- å³å´çµæœå€ --- */
        .main-content { flex: 1; display: flex; flex-direction: column; gap: 25px; }

        /* KPI å¡ç‰‡çµ„ */
        .kpi-group { display: flex; gap: 20px; }
        .kpi-card {
            flex: 1; background: #ffffff; padding: 25px; border-radius: 6px; text-align: center; 
            border: 1px solid #e5e7eb; box-shadow: 0 2px 5px rgba(0,0,0,0.03);
            transition: transform 0.2s, border-color 0.2s;
        }
        .kpi-card:hover { transform: translateY(-3px); border-color: #ED1C24; }
        .kpi-card h4 { margin: 0; font-size: 12px; color: #6b7280; text-transform: uppercase; letter-spacing: 1px; font-weight: 600; }
        .kpi-card h2 { margin: 10px 0 0; font-size: 32px; color: #111827; font-weight: 800; }
        .kpi-unit { font-size: 14px; color: #9ca3af; font-weight: 500; }
        .kpi-accent { color: #ED1C24 !important; } /* å¼·èª¿è‰² */

        /* åœ–è¡¨å€å¡Š */
        .chart-panel {
            flex: 1; background: #ffffff; border: 1px solid #d1d5db; border-radius: 6px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.03); padding: 25px; min-height: 300px;
            display: flex; flex-direction: column;
        }
        .chart-header { font-size: 14px; font-weight: 700; color: #374151; margin-bottom: 20px; text-transform: uppercase; }
        .chart-container { flex: 1; position: relative; }
        /* --- ğŸ“± æ‰‹æ©Ÿç‰ˆéŸ¿æ‡‰å¼å„ªåŒ– (Mobile Responsive) --- */
        @media screen and (max-width: 768px) {
            /* 1. è®“ä¸»å®¹å™¨è®Šæˆå‚ç›´æ’åˆ— (ä¸Šä¸‹ç–Šæ”¾) */
            body { height: auto; min-height: 100vh; overflow-y: auto; }
            .container { 
                flex-direction: column; 
                height: auto; 
                padding: 15px; 
                gap: 20px;
                overflow: visible; /* å…è¨±æ²å‹• */
            }

            /* 2. å·¦å´è¼¸å…¥å€ï¼šä½”æ»¿å¯¬åº¦ï¼Œå–æ¶ˆå³é‚Šæ¡†ï¼Œå¢åŠ åº•ç·š */
            .sidebar, .left-panel {
                width: 100%;
                max-width: 100%;
                border-right: none;
                border-bottom: 2px solid #e5e7eb;
                padding: 15px;
                height: auto;
                overflow-y: visible;
            }

            /* 3. å³å´çµæœå€ï¼šä½”æ»¿å¯¬åº¦ */
            .main, .main-content, .right-panel {
                width: 100%;
                max-width: 100%;
                padding: 15px;
                height: auto;
                overflow-y: visible;
            }

            /* 4. èª¿æ•´æ¨™é¡Œåˆ—ï¼Œé¿å… Logo å¤ªå¤§ */
            header { padding: 0 15px; }
            .brand img { height: 20px; margin-right: 10px; padding-right: 10px; }
            .title { font-size: 14px; letter-spacing: 0; border: none; padding-left: 0; }
            
            /* 5. é‡å°é¦–é  index.html çš„ç‰¹åˆ¥èª¿æ•´ */
            .hero-text h1 { font-size: 1.5em; }
            .top-branding { flex-direction: column; align-items: flex-start; gap: 10px; }
            .amd-logo { border-right: none; margin-bottom: 5px; }
            .sub-header { padding: 20px; }
            
            /* 6. å„ªåŒ– KPI å¡ç‰‡ (è®“å®ƒå€‘åœ¨æ‰‹æ©Ÿä¸Šä¹Ÿå‚ç›´æ’åˆ—ï¼Œé¿å…æ“ åœ¨ä¸€èµ·) */
            .kpi-container, .summary-box, .result-cards, .kpi-group {
                flex-direction: column;
            }
            .kpi-card, .card {
                width: 100%;
                margin-bottom: 10px;
            }
            
            /* 7. åœ–è¡¨å®¹å™¨é«˜åº¦èª¿æ•´ (é¿å…æ‰‹æ©Ÿä¸Šåœ–è¡¨å¤ªå°) */
            .chart-box, .chart-panel, .chart-container {
                min-height: 250px;
                padding: 15px;
            }
        }

    </style>
</head>
<body>

    <header>
        <div class="brand">
            <img src="https://upload.wikimedia.org/wikipedia/commons/7/7c/AMD_Logo.svg" alt="AMD Logo">
            <div class="title">Server Consolidation & Density Calculator</div>
        </div>
        <div class="header-icons"><i class="fas fa-server"></i></div>
    </header>

    <div class="container">
        
        <div class="sidebar">
            
            <div class="panel">
                <div class="panel-header">Current Legacy Environment <i class="fas fa-history"></i></div>
                <div class="panel-body">
                    <div class="input-row">
                        <div class="input-label-group">
                            <label>Current Rack Count</label>
                            <span id="val_racks" class="val-display">50</span>
                        </div>
                        <div class="slider-wrapper">
                            <input type="range" id="in_racks" min="10" max="200" step="5" value="50" oninput="calc()">
                        </div>
                    </div>

                    <div class="input-row">
                        <div class="input-label-group">
                            <label>Avg. Power per Rack (kW)</label>
                            <span id="val_power_rack" class="val-display">8 kW</span>
                        </div>
                        <div class="slider-wrapper">
                            <input type="range" id="in_power_rack" min="4" max="20" step="1" value="8" oninput="calc()">
                        </div>
                    </div>
                    
                    <div style="font-size:12px; color:#6b7280; background:#f9fafb; padding:10px; border-radius:4px;">
                        Total Current Power: <strong><span id="total_curr_power">400</span> kW</strong>
                    </div>
                </div>
            </div>

            <div class="panel" style="border-color: #ED1C24;"> <div class="panel-header" style="background:#fff1f1; border-left-color:#ED1C24; color:#ED1C24;">
                    Target AMD Deployment <i class="fas fa-rocket"></i>
                </div>
                <div class="panel-body">
                    <div class="input-row">
                        <div class="input-label-group">
                            <label>Consolidation Ratio (X:1)</label>
                            <span id="val_ratio" class="val-display" style="color:#ED1C24;">4 : 1</span>
                        </div>
                        <div class="slider-wrapper">
                            <input type="range" id="in_ratio" min="2" max="10" step="1" value="4" oninput="calc()">
                        </div>
                        <div style="font-size:11px; color:#9ca3af;">e.g., Replacing 4 old servers with 1 new AMD server.</div>
                    </div>

                    <div class="input-row" style="margin-top:10px;">
                        <div class="input-label-group">
                            <label>Target Power per Rack (kW)</label>
                            <span id="val_target_density" class="val-display" style="color:#ED1C24;">25 kW</span>
                        </div>
                        <div class="slider-wrapper">
                            <input type="range" id="in_target_density" min="10" max="50" step="5" value="25" oninput="calc()">
                        </div>
                        <div style="font-size:11px; color:#9ca3af;">Higher density supported by modern infrastructure.</div>
                    </div>
                </div>
            </div>

        </div>

        <div class="main-content">
            
            <div class="kpi-group">
                <div class="kpi-card">
                    <h4>Racks Eliminated</h4>
                    <h2 id="kpi_racks_saved" class="kpi-accent">34</h2>
                    <span class="kpi-unit">Racks Freed</span>
                </div>
                <div class="kpi-card">
                    <h4>Space Reduction</h4>
                    <h2 id="kpi_space_saved">68%</h2>
                    <span class="kpi-unit">Footprint Saved</span>
                </div>
                <div class="kpi-card">
                    <h4>Total Power Reduction</h4>
                    <h2 id="kpi_power_saved" class="kpi-accent">150 kW</h2>
                    <span class="kpi-unit">Energy Saved</span>
                </div>
            </div>

            <div class="chart-panel" style="flex:1.5;">
                <div class="chart-header">Rack Footprint Comparison</div>
                <div class="chart-container">
                    <canvas id="rackChart"></canvas>
                </div>
            </div>

             <div class="chart-panel" style="flex:1.5;">
                <div class="chart-header">Total Power Consumption Comparison</div>
                <div class="chart-container">
                    <canvas id="powerChart"></canvas>
                </div>
            </div>

        </div>
    </div>

    <script>
        // Chart.js å…¨å±€è¨­å®š (ç¬¦åˆ AMD é¢¨æ ¼)
        Chart.defaults.font.family = "'Segoe UI', sans-serif";
        Chart.defaults.color = '#6b7280';
        Chart.defaults.scale.grid.color = '#f3f4f6';

        let rackChart, powerChart;

        function initCharts() {
            // é€šç”¨åœ–è¡¨é¸é …
            const commonOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false }, tooltip: { backgroundColor: '#1f2937' } },
                scales: {
                    y: { beginAtZero: true, grid: { drawBorder: false } },
                    x: { grid: { display: false } }
                }
            };

            // åœ–è¡¨ 1: æ©Ÿæ«ƒæ•¸é‡
            const ctxRack = document.getElementById('rackChart').getContext('2d');
            rackChart = new Chart(ctxRack, {
                type: 'bar',
                data: {
                    labels: ['Legacy Deployment', 'New AMD Deployment'],
                    datasets: [{
                        data: [0, 0],
                        backgroundColor: ['#9ca3af', '#ED1C24'], // èˆŠ(ç°) vs æ–°(ç´…)
                        borderRadius: 6,
                        barPercentage: 0.6
                    }]
                },
                options: { 
                    ...commonOptions,
                    plugins: { ...commonOptions.plugins, title: { display: false } },
                    scales: { ...commonOptions.scales, y: { ...commonOptions.scales.y, title: { display: true, text: 'Number of Racks' } } }
                 }
            });

            // åœ–è¡¨ 2: é›»åŠ›æ¶ˆè€—
            const ctxPower = document.getElementById('powerChart').getContext('2d');
            powerChart = new Chart(ctxPower, {
                type: 'bar',
                data: {
                    labels: ['Legacy Deployment', 'New AMD Deployment'],
                    datasets: [{
                        data: [0, 0],
                        backgroundColor: ['#6b7280', '#b91c1c'], // èˆŠ(æ·±ç°) vs æ–°(æ·±ç´…)
                        borderRadius: 6,
                        barPercentage: 0.6
                    }]
                },
                options: { 
                    ...commonOptions,
                    scales: { ...commonOptions.scales, y: { ...commonOptions.scales.y, title: { display: true, text: 'Total Power (kW)' } } }
                 }
            });
        }

        // --- æ ¸å¿ƒè¨ˆç®—é‚è¼¯ ---
        function calc() {
            // 1. è®€å–è¼¸å…¥
            const currRacks = parseInt(document.getElementById('in_racks').value);
            const currPowerPerRack = parseInt(document.getElementById('in_power_rack').value);
            const ratio = parseInt(document.getElementById('in_ratio').value);
            const targetDensity = parseInt(document.getElementById('in_target_density').value);

            // 2. æ›´æ–°æ•¸å€¼é¡¯ç¤º
            document.getElementById('val_racks').innerText = currRacks;
            document.getElementById('val_power_rack').innerText = currPowerPerRack + " kW";
            document.getElementById('val_ratio').innerText = ratio + " : 1";
            document.getElementById('val_target_density').innerText = targetDensity + " kW";

            // 3. è¨ˆç®—ç¾ç‹€
            const totalCurrPower = currRacks * currPowerPerRack;
            document.getElementById('total_curr_power').innerText = totalCurrPower;

            // 4. è¨ˆç®—æœªä¾† (æ ¸å¿ƒå‡è¨­ï¼šæ•´åˆå¾Œæ‰€éœ€çš„ç¸½é‹ç®—èƒ½åŠ›ç›¸ç•¶ï¼Œä½†æ•ˆç‡æå‡)
            // å‡è¨­ï¼šæ–°ç³»çµ±çš„ç¸½åŠŸè€—ç´„ç‚ºèˆŠç³»çµ±çš„ (1 / æ•´åˆæ¯”ç‡) * æ•ˆç‡å› å­(ä¾‹å¦‚ 1.2ï¼Œå› ç‚ºæ–°ç¡¬é«”é›–é«˜æ•ˆä½†ä¹Ÿè·‘æ›´å¤šå·¥ä½œ)
            // é€™è£¡ç‚ºäº†ç°¡åŒ–æ¨¡å‹ä¸¦çªé¡¯å„ªå‹¢ï¼Œæˆ‘å€‘å‡è¨­æ•´åˆå¾Œçš„ç¸½åŠŸè€—æ˜¯åŸä¾†çš„ 40% + (æ•´åˆæ¯”ç‡å¸¶ä¾†çš„é¡å¤–ç¯€çœ)
            // é€™æ˜¯ä¸€å€‹ç°¡åŒ–çš„ TCO æ¨¡å‹å‡è¨­ã€‚
            const consolidationFactor = 0.4 + (1/ratio * 0.2); 
            const totalNewPowerEstimated = totalCurrPower * consolidationFactor;

            // è¨ˆç®—æ‰€éœ€çš„æ–°æ©Ÿæ«ƒæ•¸ = æ–°ç¸½åŠŸè€— / ç›®æ¨™å–®æ©Ÿæ«ƒåŠŸç‡å¯†åº¦
            const newRacks = Math.ceil(totalNewPowerEstimated / targetDensity);
            
            // ä¿®æ­£å¾Œçš„æ–°ç¸½åŠŸè€— (åŸºæ–¼å¯¦éš›æ©Ÿæ«ƒæ•¸)
            const totalNewPowerFinal = newRacks * targetDensity;

            // 5. è¨ˆç®—ç¯€çœé‡
            const racksSaved = currRacks - newRacks;
            const spaceSavedPct = ((racksSaved / currRacks) * 100).toFixed(0);
            const powerSaved = totalCurrPower - totalNewPowerFinal;

            // 6. æ›´æ–° KPI
            document.getElementById('kpi_racks_saved').innerText = racksSaved;
            document.getElementById('kpi_space_saved').innerText = spaceSavedPct + "%";
            document.getElementById('kpi_power_saved').innerText = Math.round(powerSaved) + " kW";

            // 7. æ›´æ–°åœ–è¡¨
            rackChart.data.datasets[0].data = [currRacks, newRacks];
            rackChart.update();

            powerChart.data.datasets[0].data = [totalCurrPower, totalNewPowerFinal];
            powerChart.update();
        }

        // åˆå§‹åŒ–
        initCharts();
        calc();

    </script>
</body>
</html>