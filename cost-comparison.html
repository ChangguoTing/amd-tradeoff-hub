<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>AMD TCO Comparison Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- 全局樣式 (AMD Bright Professional) --- */
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            margin: 0; 
            background-color: #f9fafb; /* 極淺灰背景 */
            color: #333; 
            display: flex; 
            height: 100vh; 
            flex-direction: column;
            /* 2. 強制最小寬度，確保左右欄位不換行 */
            min-width: 1200px;
            overflow-x: auto; /* 允許橫向捲動 */
        }

        /* 頂部標題列 */
        header { 
            background-color: #ffffff; 
            padding: 0 30px; 
            height: 70px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            border-bottom: 1px solid #e5e7eb;
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
            flex-shrink: 0; 
        }
        
        /* AMD Logo 設定 */
        .brand { display: flex; align-items: center; gap: 15px; }
        .brand img {
            height: 24px; 
            width: auto;
            display: block;
        }
        .title { 
            font-size: 18px; 
            font-weight: 600; 
            text-transform: uppercase; 
            color: #6b7280; 
            letter-spacing: 1px;
            border-left: 2px solid #e5e7eb;
            padding-left: 15px;
        }

        /* 主佈局 */
        .container { 
            display: flex; 
            flex: 1; 
            height: calc(100vh - 70px); 
            overflow: hidden;
        }

        /* 左側控制區 */
        .sidebar {
            width: 360px;
            background-color: #ffffff;
            padding: 30px;
            border-right: 1px solid #e5e7eb;
            overflow-y: auto;
            flex-shrink: 0;
        }

        h2 { 
            color: #111827; 
            font-size: 14px; 
            font-weight: 700; 
            text-transform: uppercase; 
            border-bottom: 2px solid #ED1C24; /* AMD 紅底線 */
            padding-bottom: 10px; 
            margin: 0 0 25px 0;
            letter-spacing: 1px;
        }
        
        /* 控制區塊 (Card Style) */
        .control-section { 
            margin-bottom: 30px; 
            background: #fff;
            border: 1px solid #e5e7eb; 
            padding: 20px; 
            border-radius: 6px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.03);
        }
        .control-section h3 { 
            margin-top: 0; 
            font-size: 13px; 
            color: #374151; 
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        label { display: flex; justify-content: space-between; margin-bottom: 10px; font-weight: 600; font-size: 13px; color: #6b7280; margin-top: 20px; }
        
        /* 滑桿樣式 */
        input[type="range"] { 
            width: 100%; height: 6px; background: #e5e7eb; border-radius: 3px; outline: none; appearance: none; -webkit-appearance: none; cursor: pointer;
        }
        input[type="range"]::-webkit-slider-thumb { 
            appearance: none; -webkit-appearance: none; width: 18px; height: 18px; border-radius: 50%; border: 2px solid #fff; cursor: pointer; transition: transform 0.1s; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.1); }

        /* A 方案 (灰色主題) */
        #inputA_init::-webkit-slider-thumb, #inputA_ops::-webkit-slider-thumb { background: #4b5563; }
        
        /* B 方案 (紅色主題) */
        #inputB_init::-webkit-slider-thumb, #inputB_ops::-webkit-slider-thumb { background: #ED1C24; }

        .val-display { color: #111827; font-weight: 700; font-family: monospace; }

        /* 右側內容區 */
        .main-content { 
            flex: 1; 
            padding: 40px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            overflow-y: auto; 
            background-color: #f9fafb; 
        }
        
        /* 結果摘要卡片 */
        .result-cards { display: flex; gap: 20px; margin-bottom: 30px; width: 100%; max-width: 1000px; }
        
        .card { 
            flex: 1; 
            background: #ffffff; 
            padding: 25px; 
            border-radius: 6px; 
            text-align: center; 
            border: 1px solid #e5e7eb;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
            transition: transform 0.2s;
        }
        .card:hover { transform: translateY(-2px); }

        .card h4 { margin: 0; font-size: 12px; color: #6b7280; text-transform: uppercase; letter-spacing: 1px; font-weight: 600; }
        .card h2 { margin: 10px 0 0; font-size: 28px; color: #111827; font-weight: 800; border: none; padding: 0; }

        /* 贏家樣式 (Green Highlight) */
        .card.winner { 
            border-top: 4px solid #10b981; 
            background-color: #f0fdf4; 
        } 
        /* Break-even 卡片 */
        .card.neutral { border-top: 4px solid #f59e0b; }

        /* 圖表區 */
        .chart-box { 
            width: 100%; 
            max-width: 1000px;
            background: #ffffff; 
            padding: 30px; 
            border-radius: 6px; 
            border: 1px solid #e5e7eb;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
            min-height: 400px;
        }
        
        /* 3. 移除所有 RWD @media 區塊 */

    </style>
</head>
<body>

    <header>
        <div class="brand">
            <img src="https://upload.wikimedia.org/wikipedia/commons/7/7c/AMD_Logo.svg" alt="AMD Logo">
            <div class="title">TCO & ROI Calculator</div>
        </div>
        <div><i class="fas fa-chart-area" style="color: #9ca3af; font-size: 20px;"></i></div>
    </header>

    <div class="container">
        <div class="sidebar">
            <h2>Parameters</h2>

            <div class="control-section" style="border-left: 4px solid #4b5563;">
                <h3><i class="fas fa-history" style="color:#4b5563;"></i> Plan A (Legacy/Old)</h3>
                
                <label>Initial Cost <span id="valA_init" class="val-display">$0</span></label>
                <input type="range" id="inputA_init" min="0" max="50000" step="1000" value="0">
                
                <label>Annual OpEx <span id="valA_ops" class="val-display">$8,000</span></label>
                <input type="range" id="inputA_ops" min="1000" max="20000" step="500" value="8000">
            </div>

            <div class="control-section" style="border-left: 4px solid #ED1C24;">
                <h3><i class="fas fa-rocket" style="color:#ED1C24;"></i> Plan B (AMD/New)</h3>
                
                <label>Initial Cost <span id="valB_init" class="val-display">$20,000</span></label>
                <input type="range" id="inputB_init" min="0" max="100000" step="1000" value="20000">
                
                <label>Annual OpEx <span id="valB_ops" class="val-display">$3,000</span></label>
                <input type="range" id="inputB_ops" min="1000" max="20000" step="500" value="3000">
            </div>
        </div>

        <div class="main-content">
            <div class="result-cards">
                <div class="card" id="cardA">
                    <h4>Plan A Total (10 Years)</h4>
                    <h2 id="totalA">$0</h2>
                </div>
                <div class="card" id="cardB">
                    <h4>Plan B Total (10 Years)</h4>
                    <h2 id="totalB">$0</h2>
                </div>
                <div class="card neutral">
                    <h4>Break-even Point</h4>
                    <h2 id="breakeven" style="color: #d97706;">Calculating...</h2>
                </div>
            </div>

            <div class="chart-box">
                <canvas id="costChart"></canvas>
            </div>
        </div>
    </div>

    <script>
        // Chart.js 全局設定
        Chart.defaults.font.family = "'Segoe UI', sans-serif";
        Chart.defaults.color = '#6b7280';

        // 1. 抓取元素
        const inputs = {
            a_init: document.getElementById('inputA_init'),
            a_ops:  document.getElementById('inputA_ops'),
            b_init: document.getElementById('inputB_init'),
            b_ops:  document.getElementById('inputB_ops')
        };

        // 2. 初始化圖表
        const ctx = document.getElementById('costChart').getContext('2d');
        const costChart = new Chart(ctx, {
            type: 'line', 
            data: {
                labels: ['Y0', 'Y1', 'Y2', 'Y3', 'Y4', 'Y5', 'Y6', 'Y7', 'Y8', 'Y9', 'Y10'], 
                datasets: [
                    {
                        label: 'Plan A (Legacy)',
                        data: [],
                        borderColor: '#4b5563', // 深灰色線
                        backgroundColor: 'rgba(75, 85, 99, 0.1)',
                        pointBackgroundColor: '#4b5563',
                        pointRadius: 4,
                        borderWidth: 2,
                        fill: false,
                        tension: 0.3
                    },
                    {
                        label: 'Plan B (AMD)',
                        data: [],
                        borderColor: '#ED1C24', // AMD 紅色線
                        backgroundColor: 'rgba(237, 28, 36, 0.1)',
                        pointBackgroundColor: '#ED1C24',
                        pointRadius: 4,
                        borderWidth: 2,
                        fill: false,
                        tension: 0.3
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: { mode: 'index', intersect: false },
                plugins: {
                    legend: {
                        position: 'top',
                        labels: { usePointStyle: true, font: { size: 12, weight: '600' } }
                    },
                    tooltip: {
                        backgroundColor: '#1f2937',
                        padding: 12,
                        titleFont: { size: 13 },
                        bodyFont: { size: 13 }
                    }
                },
                scales: {
                    y: { 
                        title: { display: true, text: 'Cumulative Cost ($)', color: '#9ca3af', font: { weight: '600' } },
                        grid: { color: '#f3f4f6' },
                        ticks: { color: '#6b7280', font: { weight: '600' } }
                    },
                    x: {
                        grid: { color: '#f3f4f6' },
                        ticks: { color: '#6b7280', font: { weight: '600' } }
                    }
                }
            }
        });

        // 3. 計算邏輯
        function calculate() {
            // 讀取數值
            let a_init = parseInt(inputs.a_init.value);
            let a_ops  = parseInt(inputs.a_ops.value);
            let b_init = parseInt(inputs.b_init.value);
            let b_ops  = parseInt(inputs.b_ops.value);

            // 更新左側文字顯示 (加上千分位)
            document.getElementById('valA_init').innerText = "$" + a_init.toLocaleString();
            document.getElementById('valA_ops').innerText  = "$" + a_ops.toLocaleString();
            document.getElementById('valB_init').innerText = "$" + b_init.toLocaleString();
            document.getElementById('valB_ops').innerText  = "$" + b_ops.toLocaleString();

            // 產生 10 年的數據
            let dataA = [];
            let dataB = [];
            let years = 10;
            let breakEvenYear = "No Cross";

            for(let i = 0; i <= years; i++) {
                let costA = a_init + (i * a_ops);
                let costB = b_init + (i * b_ops);
                
                dataA.push(costA);
                dataB.push(costB);

                // 簡單判斷交叉點
                if (i > 0 && costB < costA && dataB[i-1] >= dataA[i-1]) {
                    breakEvenYear = "Year " + i;
                }
            }

            // 更新圖表
            costChart.data.datasets[0].data = dataA;
            costChart.data.datasets[1].data = dataB;
            costChart.update();

            // 更新摘要
            let finalA = dataA[10];
            let finalB = dataB[10];
            document.getElementById('totalA').innerText = "$" + finalA.toLocaleString();
            document.getElementById('totalB').innerText = "$" + finalB.toLocaleString();
            document.getElementById('breakeven').innerText = breakEvenYear;

            // 贏家特效
            document.getElementById('cardA').classList.toggle('winner', finalA < finalB);
            document.getElementById('cardB').classList.toggle('winner', finalB < finalA);
        }

        // 4. 綁定事件
        Object.values(inputs).forEach(input => {
            input.addEventListener('input', calculate);
        });

        // 啟動
        calculate();
    </script>
</body>
</html>