<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMD AC vs. DC Efficiency Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- 1. å…¨å±€æ¨£å¼ (AMD Bright Professional) --- */
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            margin: 0; 
            background-color: #f9fafb; /* æ¥µæ·ºç°èƒŒæ™¯ */
            color: #333; 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
        }
        
        /* é ‚éƒ¨æ¨™é¡Œåˆ— */
        header { 
            background-color: #ffffff; 
            padding: 0 30px; 
            height: 70px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            border-bottom: 1px solid #e5e7eb;
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
            flex-shrink: 0; 
        }
        
        /* AMD Logo è¨­å®š */
        .brand { display: flex; align-items: center; gap: 15px; }
        .brand img {
            height: 24px; /* Logo å¤§å° */
            width: auto;
            display: block;
        }
        .title { 
            font-size: 18px; 
            font-weight: 600; 
            text-transform: uppercase; 
            color: #6b7280; /* æ¨™é¡Œç°è‰² */
            letter-spacing: 1px;
            border-left: 2px solid #e5e7eb;
            padding-left: 15px;
        }
        
        /* ä¸»ä½ˆå±€ */
        .container { 
            display: flex; 
            flex: 1; 
            padding: 30px; 
            gap: 30px; 
            overflow: hidden; 
            max-width: 1600px; 
            margin: 0 auto; 
            width: 100%; 
            box-sizing: border-box; 
        }
        
        /* --- å·¦å´ï¼šè¼¸å…¥å€ --- */
        .left-panel { 
            width: 40%; 
            display: flex; 
            flex-direction: column; 
            gap: 20px; 
            overflow-y: auto; 
            padding-right: 10px; 
        }
        
        .input-group { 
            background: #ffffff; 
            border: 1px solid #e5e7eb; 
            border-radius: 6px; 
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            overflow: hidden;
        }
        .group-header { 
            background: #f3f4f6; 
            color: #111827;
            padding: 12px 20px; 
            font-weight: 700; 
            font-size: 14px; 
            display: flex; 
            justify-content: space-between; 
            border-bottom: 1px solid #e5e7eb;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .group-header i { color: #000; } /* åœ–ç¤ºæ”¹ç‚ºé»‘è‰² */
        
        .group-body { padding: 20px; display: flex; flex-direction: column; gap: 18px; }

        .control-row { display: flex; align-items: center; justify-content: space-between; font-size: 13px; color: #4b5563; }
        .control-row label { flex: 1.2; font-weight: 600; }
        .slider-container { flex: 1.5; display: flex; align-items: center; gap: 15px; }
        
        /* æ»‘æ¡¿æ¨£å¼ */
        input[type="range"] { 
            flex: 1; height: 6px; background: #e5e7eb; border-radius: 3px; outline: none; appearance: none; -webkit-appearance: none; cursor: pointer;
        }
        input[type="range"]::-webkit-slider-thumb { 
            appearance: none; -webkit-appearance: none; width: 18px; height: 18px; 
            background: #000000; /* é»‘è‰²æŒ‰éˆ• */
            border: 2px solid #fff; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.2); transition: transform 0.1s;
        }
        input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.1); background: #333; }
        
        .val-display { font-weight: 700; width: 55px; text-align: right; color: #000; font-family: monospace; font-size: 14px; }

        /* ä¸‹æ‹‰é¸å–®æ¨£å¼ */
        .styled-select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            background-color: #fff;
            color: #374151;
            font-size: 13px;
            outline: none;
            cursor: pointer;
        }
        .styled-select:hover { border-color: #9ca3af; }

        /* --- å³å´ï¼šçµæœå€ --- */
        .right-panel { width: 60%; display: flex; flex-direction: column; gap: 20px; overflow-y: auto; }
        
        .result-box { 
            background: #ffffff; 
            border: 1px solid #e5e7eb; 
            border-radius: 6px; 
            display: flex; flex-direction: column; 
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
        }
        .result-header { 
            background: #fff; color: #000; padding: 15px 20px; font-weight: 700; font-size: 14px; 
            display: flex; justify-content: space-between; border-bottom: 1px solid #f3f4f6; text-transform: uppercase;
        }
        .chart-area { padding: 20px; height: 220px; position: relative; }

        /* åœ–ä¾‹ (é…åˆæ–°çš„ç°é»‘è‰²éš) */
        .custom-legend { 
            display: flex; justify-content: center; gap: 25px; margin-top: auto; padding: 15px; 
            font-size: 13px; color: #4b5563; background: #fff; border-radius: 6px; border: 1px solid #e5e7eb;
        }
        .legend-item { display: flex; align-items: center; gap: 8px; font-weight: 500; }
        .color-box { width: 14px; height: 14px; border-radius: 3px; }
        /* --- ğŸ“± æ‰‹æ©Ÿç‰ˆéŸ¿æ‡‰å¼å„ªåŒ– (Mobile Responsive) --- */
        @media screen and (max-width: 768px) {
            /* 1. è®“ä¸»å®¹å™¨è®Šæˆå‚ç›´æ’åˆ— (ä¸Šä¸‹ç–Šæ”¾) */
            body { height: auto; min-height: 100vh; overflow-y: auto; }
            .container { 
                flex-direction: column; 
                height: auto; 
                padding: 15px; 
                gap: 20px;
                overflow: visible; /* å…è¨±æ²å‹• */
            }

            /* 2. å·¦å´è¼¸å…¥å€ï¼šä½”æ»¿å¯¬åº¦ï¼Œå–æ¶ˆå³é‚Šæ¡†ï¼Œå¢åŠ åº•ç·š */
            .sidebar, .left-panel {
                width: 100%;
                max-width: 100%;
                border-right: none;
                border-bottom: 2px solid #e5e7eb;
                padding: 15px;
                height: auto;
                overflow-y: visible;
            }

            /* 3. å³å´çµæœå€ï¼šä½”æ»¿å¯¬åº¦ */
            .main, .main-content, .right-panel {
                width: 100%;
                max-width: 100%;
                padding: 15px;
                height: auto;
                overflow-y: visible;
            }

            /* 4. èª¿æ•´æ¨™é¡Œåˆ—ï¼Œé¿å… Logo å¤ªå¤§ */
            header { padding: 0 15px; }
            .brand img { height: 20px; margin-right: 10px; padding-right: 10px; }
            .title { font-size: 14px; letter-spacing: 0; border: none; padding-left: 0; }
            
            /* 5. é‡å°é¦–é  index.html çš„ç‰¹åˆ¥èª¿æ•´ */
            .hero-text h1 { font-size: 1.5em; }
            .top-branding { flex-direction: column; align-items: flex-start; gap: 10px; }
            .amd-logo { border-right: none; margin-bottom: 5px; }
            .sub-header { padding: 20px; }
            
            /* 6. å„ªåŒ– KPI å¡ç‰‡ (è®“å®ƒå€‘åœ¨æ‰‹æ©Ÿä¸Šä¹Ÿå‚ç›´æ’åˆ—ï¼Œé¿å…æ“ åœ¨ä¸€èµ·) */
            .kpi-container, .summary-box, .result-cards, .kpi-group {
                flex-direction: column;
            }
            .kpi-card, .card {
                width: 100%;
                margin-bottom: 10px;
            }
            
            /* 7. åœ–è¡¨å®¹å™¨é«˜åº¦èª¿æ•´ (é¿å…æ‰‹æ©Ÿä¸Šåœ–è¡¨å¤ªå°) */
            .chart-box, .chart-panel, .chart-container {
                min-height: 250px;
                padding: 15px;
            }
        }

    </style>
</head>
<body>

    <header>
        <div class="brand">
            <img src="https://upload.wikimedia.org/wikipedia/commons/7/7c/AMD_Logo.svg" alt="AMD Logo">
            <div class="title">Data Center Efficiency Calculator</div>
        </div>
        <div><i class="fas fa-bars" style="color: #9ca3af; cursor: pointer; font-size: 20px;"></i></div>
    </header>

    <div class="container">
        <div class="left-panel">
            
            <div class="input-group">
                <div class="group-header">Uninterruptible Power Supply (UPS) <i class="fas fa-battery-full"></i></div>
                <div class="group-body">
                    <div class="control-row">
                        <label>Modern AC UPS Efficiency</label>
                        <div class="slider-container">
                            <input type="range" id="ups_ac" min="90" max="99" step="0.1" value="96.3" oninput="calc()">
                            <span class="val-display" id="val_ups_ac">96.3%</span>
                        </div>
                    </div>
                    <div class="control-row">
                        <label>DC UPS Efficiency</label>
                        <div class="slider-container">
                            <input type="range" id="ups_dc" min="90" max="99" step="0.1" value="96.5" oninput="calc()">
                            <span class="val-display" id="val_ups_dc">96.5%</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="input-group">
                <div class="group-header">Power Distribution <i class="fas fa-network-wired"></i></div>
                <div class="group-body">
                    <div class="control-row">
                        <label>Modern AC PDU Efficiency</label>
                        <div class="slider-container">
                            <input type="range" id="pdu_ac" min="95" max="99.9" step="0.1" value="98.3" oninput="calc()">
                            <span class="val-display" id="val_pdu_ac">98.3%</span>
                        </div>
                    </div>
                    <div class="control-row">
                        <label>Distribution Wiring Efficiency</label>
                        <div class="slider-container">
                            <input type="range" id="wire" min="98" max="99.9" step="0.1" value="99.5" oninput="calc()">
                            <span class="val-display" id="val_wire">99.5%</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="input-group">
                <div class="group-header">IT Power Supply (PSU) <i class="fas fa-plug"></i></div>
                <div class="group-body">
                    <div class="control-row">
                        <label>Modern AC PSU Efficiency</label>
                        <div class="slider-container">
                            <input type="range" id="psu_ac" min="85" max="98" step="0.1" value="93.2" oninput="calc()">
                            <span class="val-display" id="val_psu_ac">93.2%</span>
                        </div>
                    </div>
                    <div class="control-row">
                        <label>Modern DC PSU Efficiency</label>
                        <div class="slider-container">
                            <input type="range" id="psu_dc" min="85" max="98" step="0.1" value="94.1" oninput="calc()">
                            <span class="val-display" id="val_psu_dc">94.1%</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="input-group">
                <div class="group-header">Cooling & Lighting <i class="fas fa-snowflake"></i></div>
                <div class="group-body">
                    <div class="control-row">
                        <label>Cooling Architecture</label>
                        <div style="flex:1.5">
                            <select class="styled-select">
                                <option>Traditional chilled water system</option>
                                <option>Air-cooled chillers with economizer</option>
                                <option>Direct/Indirect evaporative cooling</option>
                                <option>Liquid immersion cooling</option>
                            </select>
                        </div>
                    </div>
                    <div class="control-row">
                        <label>Lighting</label>
                        <div style="flex:1.5">
                            <select class="styled-select">
                                <option>Traditional lighting (Fluorescent)</option>
                                <option>LED lighting with motion sensors</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="right-panel">
            
            <div class="result-box">
                <div class="result-header">Power Path Efficiency (%)</div>
                <div class="chart-area"><canvas id="chartEff"></canvas></div>
            </div>

            <div class="result-box">
                <div class="result-header">Efficiency Improvement (%)</div>
                <div class="chart-area"><canvas id="chartImp"></canvas></div>
            </div>

            <div class="result-box">
                <div class="result-header">Total Power Reduction (%)</div>
                <div class="chart-area"><canvas id="chartRed"></canvas></div>
            </div>

            <div class="custom-legend">
                <div class="legend-item"><div class="color-box" style="background:#D1D5DB"></div>Legacy</div>
                <div class="legend-item"><div class="color-box" style="background:#9CA3AF"></div>Modern AC</div>
                <div class="legend-item"><div class="color-box" style="background:#6B7280"></div>415 VAC</div>
                <div class="legend-item"><div class="color-box" style="background:#2D3748"></div>380 VDC</div>
            </div>

        </div>
    </div>

    <script>
        // è¨­å®š Chart.js é è¨­å­—å‹èˆ‡é¡è‰²
        Chart.defaults.font.family = "'Segoe UI', sans-serif";
        Chart.defaults.color = '#374151'; 
        Chart.defaults.font.size = 11;
        
        // ã€ä¿®æ”¹é» 1ã€‘é¡è‰²å®šç¾©ï¼šæ”¹ç‚ºç°é»‘è‰²éšï¼Œå››è‰²ä¸åŒï¼Œç„¡ç´…è‰²
        const colors = ['#D1D5DB', '#9CA3AF', '#6B7280', '#2D3748']; 
        // Xè»¸æ¨™ç±¤
        const labels = ['Legacy', 'Modern AC', '415 VAC', '380 VDC'];

        // åˆå§‹åŒ–è®Šæ•¸
        let chartEff, chartImp, chartRed;

        function initCharts() {
            // é€šç”¨åœ–è¡¨è¨­å®š
            const commonOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { 
                    legend: { display: false }, // éš±è—ä¸Šæ–¹é è¨­åœ–ä¾‹
                    tooltip: { enabled: true, backgroundColor: '#1f2937', padding: 10 } 
                },
                layout: { padding: { top: 25 } },
                scales: {
                    x: {
                        display: true, // é¡¯ç¤º X è»¸æ¨™ç±¤ (åœ–ä¸‹æ–¹æ–‡å­—)
                        grid: { display: false },
                        ticks: { color: '#4b5563', font: { weight: '600' } }
                    }
                }
            };

            // åœ–è¡¨ 1: æ•ˆç‡
            chartEff = new Chart(document.getElementById('chartEff'), {
                type: 'bar',
                data: { labels: labels, datasets: [{ data: [0,0,0,0], backgroundColor: colors, barPercentage: 0.6, borderRadius: 4 }] },
                options: { 
                    ...commonOptions, 
                    scales: { 
                        ...commonOptions.scales,
                        y: { beginAtZero: false, min: 70, max: 100, grid: { color: '#f3f4f6' } }
                    },
                    plugins: { 
                        ...commonOptions.plugins,
                        datalabels: { anchor: 'end', align: 'top', color: '#374151', font: { weight: 'bold' }, formatter: (v)=>v.toFixed(1) } 
                    } 
                },
                plugins: [ChartDataLabels]
            });

            // åœ–è¡¨ 2: æå‡ç‡
            chartImp = new Chart(document.getElementById('chartImp'), {
                type: 'bar',
                data: { labels: labels, datasets: [{ data: [0,0,0,0], backgroundColor: colors, barPercentage: 0.6, borderRadius: 4 }] },
                options: { 
                    ...commonOptions, 
                    scales: { 
                         ...commonOptions.scales,
                        y: { beginAtZero: true, max: 30, grid: { color: '#f3f4f6' } }
                    },
                    plugins: { 
                        ...commonOptions.plugins,
                        datalabels: { anchor: 'end', align: 'top', color: '#374151', formatter: (v)=>v.toFixed(1)+'%' } 
                    } 
                },
                plugins: [ChartDataLabels]
            });

            // åœ–è¡¨ 3: ç¯€èƒ½ç‡
            chartRed = new Chart(document.getElementById('chartRed'), {
                type: 'bar',
                data: { labels: labels, datasets: [{ data: [0,0,0,0], backgroundColor: colors, barPercentage: 0.6, borderRadius: 4 }] },
                options: { 
                    ...commonOptions, 
                    scales: { 
                         ...commonOptions.scales,
                        y: { beginAtZero: true, max: 30, grid: { color: '#f3f4f6' } }
                    },
                    plugins: { 
                         ...commonOptions.plugins,
                        datalabels: { anchor: 'end', align: 'top', color: '#374151', formatter: (v)=>v.toFixed(1)+'%' } 
                    } 
                },
                plugins: [ChartDataLabels]
            });
        }

        // --- è¨ˆç®—é‚è¼¯ ---
        function calc() {
            // è®€å–è¼¸å…¥å€¼
            const upsAc = parseFloat(document.getElementById('ups_ac').value) / 100;
            const upsDc = parseFloat(document.getElementById('ups_dc').value) / 100;
            const pduAc = parseFloat(document.getElementById('pdu_ac').value) / 100;
            const wire = parseFloat(document.getElementById('wire').value) / 100;
            const psuAc = parseFloat(document.getElementById('psu_ac').value) / 100;
            const psuDc = parseFloat(document.getElementById('psu_dc').value) / 100;

            // æ›´æ–°æ–‡å­—é¡¯ç¤º
            document.getElementById('val_ups_ac').innerText = (upsAc*100).toFixed(1) + "%";
            document.getElementById('val_ups_dc').innerText = (upsDc*100).toFixed(1) + "%";
            document.getElementById('val_pdu_ac').innerText = (pduAc*100).toFixed(1) + "%";
            document.getElementById('val_wire').innerText = (wire*100).toFixed(1) + "%";
            document.getElementById('val_psu_ac').innerText = (psuAc*100).toFixed(1) + "%";
            document.getElementById('val_psu_dc').innerText = (psuDc*100).toFixed(1) + "%";

            // è¨ˆç®—æ•ˆç‡
            // Legacy è¨­å®šç‚ºå›ºå®šå¸¸æ•¸ (åŸºæº–ç·š)
            const legacy_ups = 0.92; 
            const legacy_pdu = 0.95; 
            const legacy_wire = 0.98; 
            const legacy_psu = 0.85; 
            const effLegacy = legacy_ups * legacy_pdu * legacy_wire * legacy_psu;

            // å…¶ä»–æ¶æ§‹ (å—æ»‘æ¡¿æ§åˆ¶)
            const effModern = upsAc * pduAc * wire * psuAc;
            const eff415 = upsAc * 0.995 * (wire + 0.002) * psuAc; 
            const effDC = upsDc * 0.995 * (wire + 0.001) * psuDc;

            const effData = [effLegacy * 100, effModern * 100, eff415 * 100, effDC * 100];

            // è¨ˆç®—æå‡ç‡ (Improvement) - Legacy è‡ªå·±æ¯”è‡ªå·±ï¼Œæ†ç‚º 0%
            const impData = effData.map(e => ((e - effLegacy * 100) / (effLegacy * 100)) * 100);

            // è¨ˆç®—ç¯€èƒ½ç‡ (Power Reduction) - Legacy è‡ªå·±æ¯”è‡ªå·±ï¼Œæ†ç‚º 0%
            const inputLegacy = 1 / effLegacy;
            const redData = [effLegacy, effModern, eff415, effDC].map(e => {
                const inputCurrent = 1 / e;
                return (1 - (inputCurrent / inputLegacy)) * 100;
            });

            // æ›´æ–°åœ–è¡¨æ•¸æ“š
            chartEff.data.datasets[0].data = effData;
            chartEff.update();

            chartImp.data.datasets[0].data = impData;
            chartImp.update();

            chartRed.data.datasets[0].data = redData;
            chartRed.update();
        }

        // å•Ÿå‹•ç¨‹å¼
        initCharts();
        calc();

    </script>
</body>
</html>